var xe=r=>{throw TypeError(r)};var Ge=(r,e,a)=>e.has(r)||xe("Cannot "+a);var fe=(r,e,a)=>(Ge(r,e,"read from private field"),a?a.call(r):e.get(r)),we=(r,e,a)=>e.has(r)?xe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,a);import{d as he,t as C,a as k,e as Ne,f as X}from"../chunks/CX9DZ4IT.js";import{a2 as je,b as De,h as D,c as Be,aa as Me,d as We,r as ye,e as le,f as K,U as Ae,ab as $,ac as ae,ad as be,j as ee,ae as He,l as j,W as Te,V as Ee,af as Ie,G as Xe,i as ce,k as oe,ag as Ze,g as W,ah as ue,y as ze,C as Re,a6 as Je,ai as de,I as Ce,aj as ke,ak as Ke,B as $e,al as ea,a4 as aa,am as ge,an as ta,w as ra,v as sa,F as na,ao as qe,ap as ia,a as Le,m as ve,o as _e,q as E,S as te,t as A,a3 as Oe,n as S,T as H,s as la}from"../chunks/BKrh2xdt.js";import{s as R}from"../chunks/BT7k9Flt.js";import{i as P}from"../chunks/FJGWsYFc.js";import{p as L}from"../chunks/DYD3sZFk.js";import{i as oa}from"../chunks/Cq7HcHsw.js";import{a as ua,r as Se,s as ca,b as va}from"../chunks/J8wMd2VH.js";const me=0,ie=1,pe=2;function _a(r,e,a,i,m){D&&Be();var l=r,u=je(),v=Xe,c=Ae,_,d,T,o=(u?ae:be)(void 0),n=(u?ae:be)(void 0),t=!1;function g(y,x){t=!0,x&&(Te(w),Ee(w),Ie(v));try{y===me&&a&&(_?ce(_):_=ee(()=>a(l))),y===ie&&i&&(d?ce(d):d=ee(()=>i(l,o))),y!==me&&_&&oe(_,()=>_=null),y!==ie&&d&&oe(d,()=>d=null),y!==pe&&T&&oe(T,()=>T=null)}finally{x&&(Ie(null),Ee(null),Te(null),Ze())}}var w=De(()=>{if(c===(c=e()))return;let y=D&&Me(c)===(l.data===We);if(y&&(l=ye(),le(l),K(!1),y=!0),Me(c)){var x=c;t=!1,x.then(M=>{x===c&&($(o,M),g(ie,!0))},M=>{if(x===c)throw $(n,M),g(pe,!0),n.v}),D?a&&(_=ee(()=>a(l))):He(()=>{t||g(me,!0)})}else $(o,c),g(ie,!1);return y&&K(!0),()=>c=Ae});D&&(l=j)}function Ue(r,e){return e}function fa(r,e,a,i){for(var m=[],l=e.length,u=0;u<l;u++)Ke(e[u].e,m,!0);var v=l>0&&m.length===0&&a!==null;if(v){var c=a.parentNode;$e(c),c.append(a),i.clear(),O(r,e[0].prev,e[l-1].next)}ea(m,()=>{for(var _=0;_<l;_++){var d=e[_];v||(i.delete(d.k),O(r,d.prev,d.next)),aa(d.e,!v)}})}function Fe(r,e,a,i,m,l=null){var u=r,v={flags:e,items:new Map,first:null},c=(e&qe)!==0;if(c){var _=r;u=D?le(sa(_)):_.appendChild(na())}D&&Be();var d=null,T=!1,o=ue(()=>{var n=a();return Je(n)?n:n==null?[]:Re(n)});De(()=>{var n=W(o),t=n.length;if(T&&t===0)return;T=t===0;let g=!1;if(D){var w=u.data===We;w!==(t===0)&&(u=ye(),le(u),K(!1),g=!0)}if(D){for(var y=null,x,M=0;M<t;M++){if(j.nodeType===8&&j.data===ze){u=j,g=!0,K(!1);break}var b=n[M],p=i(b,M);x=Qe(j,v,y,null,b,p,M,m,e,a),v.items.set(p,x),y=x}t>0&&le(ye())}D||da(n,v,u,m,e,i,a),l!==null&&(t===0?d?ce(d):d=ee(()=>l(u)):d!==null&&oe(d,()=>{d=null})),g&&K(!0),W(o)}),D&&(u=j)}function da(r,e,a,i,m,l,u){var Y,J,ne,s;var v=(m&ia)!==0,c=(m&(ge|ke))!==0,_=r.length,d=e.items,T=e.first,o=T,n,t=null,g,w=[],y=[],x,M,b,p;if(v)for(p=0;p<_;p+=1)x=r[p],M=l(x,p),b=d.get(M),b!==void 0&&((Y=b.a)==null||Y.measure(),(g??(g=new Set)).add(b));for(p=0;p<_;p+=1){if(x=r[p],M=l(x,p),b=d.get(M),b===void 0){var q=o?o.e.nodes_start:a;t=Qe(q,e,t,t===null?e.first:t.next,x,M,p,i,m,u),d.set(M,t),w=[],y=[],o=t.next;continue}if(c&&ma(b,x,p,m),(b.e.f&de)!==0&&(ce(b.e),v&&((J=b.a)==null||J.unfix(),(g??(g=new Set)).delete(b))),b!==o){if(n!==void 0&&n.has(b)){if(w.length<y.length){var Q=y[0],B;t=Q.prev;var V=w[0],Z=w[w.length-1];for(B=0;B<w.length;B+=1)Pe(w[B],Q,a);for(B=0;B<y.length;B+=1)n.delete(y[B]);O(e,V.prev,Z.next),O(e,t,V),O(e,Z,Q),o=Q,t=Z,p-=1,w=[],y=[]}else n.delete(b),Pe(b,o,a),O(e,b.prev,b.next),O(e,b,t===null?e.first:t.next),O(e,t,b),t=b;continue}for(w=[],y=[];o!==null&&o.k!==M;)(o.e.f&de)===0&&(n??(n=new Set)).add(o),y.push(o),o=o.next;if(o===null)continue;b=o}w.push(b),t=b,o=b.next}if(o!==null||n!==void 0){for(var U=n===void 0?[]:Re(n);o!==null;)(o.e.f&de)===0&&U.push(o),o=o.next;var z=U.length;if(z>0){var se=(m&qe)!==0&&_===0?a:null;if(v){for(p=0;p<z;p+=1)(ne=U[p].a)==null||ne.measure();for(p=0;p<z;p+=1)(s=U[p].a)==null||s.fix()}fa(e,U,se,d)}}v&&He(()=>{var f;if(g!==void 0)for(b of g)(f=b.a)==null||f.apply()}),Ce.first=e.first&&e.first.e,Ce.last=t&&t.e}function ma(r,e,a,i){(i&ge)!==0&&$(r.v,e),(i&ke)!==0?$(r.i,a):r.i=a}function Qe(r,e,a,i,m,l,u,v,c,_){var d=(c&ge)!==0,T=(c&ta)===0,o=d?T?be(m):ae(m):m,n=(c&ke)===0?u:ae(u),t={i:n,v:o,k:l,a:null,e:null,prev:a,next:i};try{return t.e=ee(()=>v(r,o,n,_),D),t.e.prev=a&&a.e,t.e.next=i&&i.e,a===null?e.first=t:(a.next=t,a.e.next=t.e),i!==null&&(i.prev=t,i.e.prev=t.e),t}finally{}}function Pe(r,e,a){for(var i=r.next?r.next.e.nodes_start:a,m=e?e.e.nodes_start:a,l=r.e.nodes_start;l!==i;){var u=ra(l);m.before(l),l=u}}function O(r,e,a){e===null?r.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function pa(r){var e=ae(0);return function(){return arguments.length===1?(Le(e,W(e)+1),arguments[0]):(W(e),r())}}var re;class ya{constructor(){we(this,re,[{id:1,name:"Playlist 1",tracks:[{id:1,author:"Men At Work",duration:200.49,performer:"Men At Work",s3_artkey:"artkey1",s3_key:"key1",title:"Who Can It Be Now",url:"/mp3/who_can_it_be_now.mp3"},{id:2,author:"Mac Miller",duration:347.3,performer:"Mac Miller",s3_artkey:"artkey2",s3_key:"key2",title:"Self Care",url:"/mp3/mac_miller-self_care.mp3"},{id:3,author:"Stromae & Pomme",duration:168.96,performer:"Stromae & Pomme",s3_artkey:"artkey1231232",s3_key:"key321j12132k",title:"Ma Meilleure Ennemie",url:"/mp3/stromae_pomme_ma_meilleure_ennemie.mp3"}]},{id:2,name:"Playlist 2",tracks:[{id:1,author:"Men At Work",duration:200.49,performer:"Men At Work",s3_artkey:"artkey1",s3_key:"key1",title:"Who Can It Be Now",url:"/mp3/who_can_it_be_now.mp3"},{id:3,author:"Stromae & Pomme",duration:168.96,performer:"Stromae & Pomme",s3_artkey:"artkey1231232",s3_key:"key321j12132k",title:"Ma Meilleure Ennemie",url:"/mp3/stromae_pomme_ma_meilleure_ennemie.mp3"}]},{id:3,name:"Playlist 3",tracks:[{id:1,author:"Men At Work",duration:200.49,performer:"Men At Work",s3_artkey:"artkey1",s3_key:"key1",title:"Who Can It Be Now",url:"/mp3/who_can_it_be_now.mp3"},{id:4,author:"Manu Chao",duration:240.048,performer:"Manu Chao",s3_artkey:"artkey1",s3_key:"key1",title:"Me gustas Tu",url:"/mp3/manu_chao-me_gustas_tu.mp3"},{id:5,author:"Canserbero",duration:240.048,performer:"Canserbero",s3_artkey:"artkey1",s3_key:"key1",title:"Querer Querernos",url:"/mp3/canserbero-querer_querernos.mp3"},{id:6,author:"Canserbero",duration:240.048,performer:"Canserbero",s3_artkey:"artkey1",s3_key:"key1",title:"¿Y La Felicidad Qué?",url:"/mp3/canserbero-y_la_felicidad_que.mp3"}]}])}async getAllPlaylists(){return new Promise(e=>{const a=fe(this,re).map(({id:i,name:m})=>({id:i,name:m}));setTimeout(()=>e(a),500)})}async getTracksByPlaylistId(e){return new Promise(a=>{const i=fe(this,re).find(m=>m.id===e);a(i?i.tracks:[])})}}re=new WeakMap;const Ve=new ya;var ba=(r,e,a)=>e.onSelectPlaylist(a()),ha=C('<div class="card bg-base-100 shadow-md"><div class="card-body"><h2 class="card-title"> </h2> <!> <div class="card-actions justify-end"><button class="btn btn-primary">Seleccionar</button></div></div></div>'),ka=C('<div class="inline-flex w-full flex-col gap-4"><!></div>');function ga(r,e){ve(e,!0);const a=(l,u=Oe)=>{var v=ha(),c=E(v),_=E(c),d=E(_,!0);A(_);var T=S(_,2);{var o=g=>{var w=X();H(()=>R(w,`${u().tracks.length??""} canciones`)),k(g,w)};P(T,g=>{u().tracks&&g(o)})}var n=S(T,2),t=E(n);t.__click=[ba,e,u],A(n),A(c),A(v),H(()=>R(d,u().name)),k(l,v)};var i=ka(),m=E(i);_a(m,()=>Ve.getAllPlaylists(),l=>{var u=X("loading playlists...");k(l,u)},(l,u)=>{var v=Ne(),c=te(v);Fe(c,17,()=>W(u),Ue,(_,d)=>{a(_,()=>W(d))}),k(l,v)}),A(i),k(r,i),_e()}he(["click"]);var xa=C('<button class="btn btn-sm btn-primary">▶️</button>'),wa=C('<button class="btn btn-sm btn-secondary">⏸</button>'),Ma=C('<button class="btn btn-sm btn-primary">▶️</button>'),Aa=C('<button disabled class="btn btn-sm btn-disabled">▶️</button>'),Ta=C('<li class="flex items-center justify-between rounded-lg bg-white p-2 shadow-sm hover:bg-gray-50"><span class="text-gray-700"> </span> <!></li>'),Ea=C('<h2 class="mb-4 text-lg font-bold text-gray-800"> </h2> <ul class="space-y-2"></ul>',1),Ia=C('<p class="text-gray-500">Selecciona una playlist para ver las canciones.</p>'),Ca=C('<div class="min-h-7 w-full rounded-lg bg-gray-100 p-4 shadow-md"><!></div>');function Sa(r,e){ve(e,!0);const a=(v,c=Oe)=>{var _=Ne(),d=te(_);{var T=n=>{var t=xa();t.__click=()=>{L.play_track(c()),L.current_playlist=e.selected_playlist},k(n,t)},o=(n,t)=>{{var g=y=>{var x=wa();x.__click=()=>L.pause(),k(y,x)},w=(y,x)=>{{var M=p=>{var q=Ma();q.__click=()=>L.play(),k(p,q)},b=p=>{var q=Aa();k(p,q)};P(y,p=>{L.state.is_paused?p(M):p(b,!1)},x)}};P(n,y=>{L.state.is_playing?y(g):y(w,!1)},t)}};P(d,n=>{var t;((t=L.current_track)==null?void 0:t.id)!==c().id?n(T):n(o,!1)})}k(v,_)};var i=Ca(),m=E(i);{var l=v=>{var c=Ea(),_=te(c),d=E(_,!0);A(_);var T=S(_,2);Fe(T,21,()=>e.selected_playlist.tracks,Ue,(o,n)=>{var t=Ta(),g=E(t),w=E(g);A(g);var y=S(g,2);a(y,()=>W(n)),A(t),H(()=>R(w,`${W(n).title??""} - ${W(n).author??""}`)),k(o,t)}),A(T),H(()=>R(d,e.selected_playlist.name)),k(v,c)},u=v=>{var c=Ia();k(v,c)};P(m,v=>{e.selected_playlist?v(l):v(u,!1)})}A(i),k(r,i),_e()}he(["click"]);var h=pa(()=>L),Pa=C('<button class="btn btn-circle bg-gray-700 text-white hover:bg-gray-600">⏸</button>'),Na=C('<button class="btn btn-circle bg-gray-700 text-white hover:bg-gray-600">▶️</button>'),Da=C('<button disabled class="btn btn-circle cursor-not-allowed bg-gray-500 text-white">▶️</button>'),Ba=C('<input type="range" id="barraProgreso" step="0.1" min="0" class="mx-4 w-full">'),Wa=C('<p class="mx-4 text-sm">Buffering...</p>'),Ha=C('<p class="text-sm font-semibold text-gray-200"> </p> <p class="text-sm text-gray-400"> </p>',1),Ra=C('<p class="text-sm text-gray-400">Sin información de la pista</p>'),qa=C('<div class="fixed bottom-0 left-0 flex w-full flex-col items-center bg-gray-800 p-4 text-white shadow-lg"><div class="flex items-center justify-center space-x-4"><button class="btn btn-circle bg-gray-700 text-white hover:bg-gray-600">⏮</button> <!> <button class="btn btn-circle bg-gray-700 text-white hover:bg-gray-600">⏭</button></div> <div class="mt-4 flex w-full max-w-4xl items-center justify-between"><span class="text-sm"><!></span> <!> <span class="text-sm"><!></span></div> <div class="mt-2 text-center"><!></div> <div class="mt-4 flex items-center space-x-2"><input id="autoplayToggle" type="checkbox" class="toggle toggle-primary"> <label for="autoplayToggle" class="text-sm text-gray-200"> </label></div></div>');function La(r,e){ve(e,!1);const a=s=>{const f=parseFloat(s.target.value);h().seek(f)},i=()=>{h().state.is_playing&&h().pause()},m=()=>{h().play()},l=s=>{const f=Math.floor(s/60),I=Math.floor(s%60);return`${f}:${I<10?"0":""}${I}`};oa();var u=qa(),v=E(u),c=E(v);c.__click=()=>h().prev();var _=S(c,2);{var d=s=>{var f=Pa();f.__click=()=>h().pause(),k(s,f)},T=(s,f)=>{{var I=N=>{var G=Na();G.__click=()=>h().play(),k(N,G)},F=N=>{var G=Da();k(N,G)};P(s,N=>{h().state.is_paused?N(I):N(F,!1)},f)}};P(_,s=>{h().state.is_playing?s(d):s(T,!1)})}var o=S(_,2);o.__click=()=>h().next(),A(v);var n=S(v,2),t=E(n),g=E(t);{var w=s=>{var f=X();H(I=>R(f,I),[()=>l(h().current_time)],ue),k(s,f)},y=s=>{var f=X("00:00");k(s,f)};P(g,s=>{h().current_time?s(w):s(y,!1)})}A(t);var x=S(t,2);{var M=s=>{var f=Ba();Se(f),f.__input=a,f.__mousedown=i,f.__mouseup=m,H(()=>{var I;return ca(f,"max",((I=h().audio_player)==null?void 0:I.duration)||0)}),va(f,()=>h().current_time,I=>h(h().current_time=I)),k(s,f)},b=(s,f)=>{{var I=F=>{var N=Wa();k(F,N)};P(s,F=>{h().state.is_buffering&&F(I)},f)}};P(x,s=>{h().state.is_playing||h().state.is_paused?s(M):s(b,!1)})}var p=S(x,2),q=E(p);{var Q=s=>{var f=X();H(I=>R(f,I),[()=>l(h().current_track.duration-h().current_time)],ue),k(s,f)},B=s=>{var f=X("00:00");k(s,f)};P(q,s=>{h().current_track&&h().current_time?s(Q):s(B,!1)})}A(p),A(n);var V=S(n,2),Z=E(V);{var U=s=>{var f=Ha(),I=te(f),F=E(I);A(I);var N=S(I,2),G=E(N);A(N),H(Ye=>{R(F,`${h().current_track.title??""} - ${h().current_track.author??""}`),R(G,`Duración: ${Ye??""}`)},[()=>l(h().current_track.duration)],ue),k(s,f)},z=s=>{var f=Ra();k(s,f)};P(Z,s=>{h().current_track?s(U):s(z,!1)})}A(V);var se=S(V,2),Y=E(se);Se(Y);var J=S(Y,2),ne=E(J);A(J),A(se),A(u),H(()=>R(ne,`Autoplay: ${h().is_autoplay?"Activado":"Desactivado"}`)),ua(Y,()=>h().is_autoplay,s=>h(h().is_autoplay=s)),k(r,u),_e()}he(["click","input","mousedown","mouseup"]);var Oa=C('<div class="flex"><!> <!></div> <!>',1);function Za(r,e){ve(e,!0);let a=la(null);var i=Oa(),m=te(i),l=E(m);ga(l,{onSelectPlaylist:async c=>{const _=await Ve.getTracksByPlaylistId(c.id);Le(a,{...c,tracks:_},!0)}});var u=S(l,2);Sa(u,{get selected_playlist(){return W(a)}}),A(m);var v=S(m,2);La(v,{}),k(r,i),_e()}export{Za as component};
