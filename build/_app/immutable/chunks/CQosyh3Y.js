var d=t=>{throw TypeError(t)};var g=(t,e,s)=>e.has(t)||d("Cannot "+s);var n=(t,e,s)=>(g(t,e,"read from private field"),s?s.call(t):e.get(t)),l=(t,e,s)=>e.has(t)?d("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),i=(t,e,s,a)=>(g(t,e,"write to private field"),a?a.call(t,s):e.set(t,s),s);import{s as m,g as f,a as T}from"./BKrh2xdt.js";const k=!0,p=k;var o,c,h,u;class S{constructor(){l(this,o,null);l(this,c,null);l(this,h,null);l(this,u,m(!1));{const e=localStorage.getItem("authData");if(e)try{const{user:s,accessToken:a,refreshToken:r}=JSON.parse(e);i(this,o,s),i(this,c,a),i(this,h,r),this.isAuthenticated=!0}catch(s){console.error("Error al cargar los datos de autenticación desde localStorage:",s)}}}get isAuthenticated(){return f(n(this,u))}set isAuthenticated(e){T(n(this,u),e,!0)}async login(e,s){try{const a=await fetch("https://dummyjson.com/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:s,expiresInMins:30})});if(!a.ok)throw new Error("Error en la autenticación. Verifica tus credenciales.");const r=await a.json();i(this,c,r.accessToken),i(this,h,r.refreshToken),i(this,o,{id:r.id,username:r.username,email:r.email,firstName:r.firstName,lastName:r.lastName,gender:r.gender,image:r.image}),this.isAuthenticated=!0,p&&localStorage.setItem("authData",JSON.stringify({user:n(this,o),accessToken:n(this,c),refreshToken:n(this,h)}))}catch(a){throw console.error("Error en el inicio de sesión:",a),a}}logout(){i(this,o,null),i(this,c,null),i(this,h,null),this.isAuthenticated=!1,localStorage.removeItem("authData")}getUser(){return n(this,o)}getAccessToken(){return n(this,c)}getRefreshToken(){return n(this,h)}}o=new WeakMap,c=new WeakMap,h=new WeakMap,u=new WeakMap;const w=new S;export{w as a};
