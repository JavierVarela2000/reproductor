var _e=t=>{throw TypeError(t)};var We=(t,e,a)=>e.has(t)||_e("Cannot "+a);var F=(t,e,a)=>(We(t,e,"read from private field"),a?a.call(t):e.get(t)),de=(t,e,a)=>e.has(t)?_e("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a);import{d as we,t as A,c as x,e as Ee,f as me}from"../chunks/C4tweBjP.js";import{a1 as Le,b as Ae,h as w,c as Ie,a2 as pe,d as Se,r as ee,e as q,f as B,U as ye,a3 as R,a4 as V,a5 as ae,j as W,a6 as Te,l as C,X as he,W as be,a7 as ke,m as Oe,i as X,k as G,a8 as Ue,g as P,a9 as Ye,C as qe,I as Me,Y as Ge,aa as J,M as ge,ab as te,ac as Ve,G as Xe,ad as ze,ae as Ke,af as ne,ag as Qe,A as Ze,z as Fe,K as Je,ah as Pe,ai as je,L as le,N as ie,S as I,P as re,T as E,aj as Ne,R as L,Q as z,a as $e,s as ea}from"../chunks/AkqJN3-E.js";import{s as K}from"../chunks/DP0d7mW8.js";import{i as H}from"../chunks/ChN-cwTP.js";import{p as M}from"../chunks/BJ86CUmn.js";const j=0,Y=1,$=2;function aa(t,e,a,n,_){w&&Ie();var o=t,i=Le(),f=Oe,u=ye,c,v,g,l=(i?V:ae)(void 0),s=(i?V:ae)(void 0),r=!1;function y(d,b){r=!0,b&&(he(h),be(h),ke(f));try{d===j&&a&&(c?X(c):c=W(()=>a(o))),d===Y&&n&&(v?X(v):v=W(()=>n(o,l))),d!==j&&c&&G(c,()=>c=null),d!==Y&&v&&G(v,()=>v=null),d!==$&&g&&G(g,()=>g=null)}finally{b&&(ke(null),be(null),he(null),Ue())}}var h=Ae(()=>{if(u===(u=e()))return;let d=w&&pe(u)===(o.data===Se);if(d&&(o=ee(),q(o),B(!1),d=!0),pe(u)){var b=u;r=!1,b.then(k=>{b===u&&(R(l,k),y(Y,!0))},k=>{if(b===u)throw R(s,k),y($,!0),s.v}),w?a&&(c=W(()=>a(o))):Te(()=>{r||y(j,!0)})}else R(l,u),y(Y,!1);return d&&B(!0),()=>u=ye});w&&(o=C)}function Ce(t,e){return e}function ra(t,e,a,n){for(var _=[],o=e.length,i=0;i<o;i++)Ve(e[i].e,_,!0);var f=o>0&&_.length===0&&a!==null;if(f){var u=a.parentNode;Xe(u),u.append(a),n.clear(),T(t,e[0].prev,e[o-1].next)}ze(_,()=>{for(var c=0;c<o;c++){var v=e[c];f||(n.delete(v.k),T(t,v.prev,v.next)),Ke(v.e,!f)}})}function De(t,e,a,n,_,o=null){var i=t,f={flags:e,items:new Map,first:null},u=(e&Pe)!==0;if(u){var c=t;i=w?q(Fe(c)):c.appendChild(Je())}w&&Ie();var v=null,g=!1,l=Ye(()=>{var s=a();return Ge(s)?s:s==null?[]:Me(s)});Ae(()=>{var s=P(l),r=s.length;if(g&&r===0)return;g=r===0;let y=!1;if(w){var h=i.data===Se;h!==(r===0)&&(i=ee(),q(i),B(!1),y=!0)}if(w){for(var d=null,b,k=0;k<r;k++){if(C.nodeType===8&&C.data===qe){i=C,y=!0,B(!1);break}var m=s[k],p=n(m,k);b=He(C,f,d,null,m,p,k,_,e,a),f.items.set(p,b),d=b}r>0&&q(ee())}w||ta(s,f,i,_,e,n,a),o!==null&&(r===0?v?X(v):v=W(()=>o(i)):v!==null&&G(v,()=>{v=null})),y&&B(!0),P(l)}),w&&(i=C)}function ta(t,e,a,n,_,o,i){var oe,fe,ue,ce;var f=(_&je)!==0,u=(_&(ne|te))!==0,c=t.length,v=e.items,g=e.first,l=g,s,r=null,y,h=[],d=[],b,k,m,p;if(f)for(p=0;p<c;p+=1)b=t[p],k=o(b,p),m=v.get(k),m!==void 0&&((oe=m.a)==null||oe.measure(),(y??(y=new Set)).add(m));for(p=0;p<c;p+=1){if(b=t[p],k=o(b,p),m=v.get(k),m===void 0){var N=l?l.e.nodes_start:a;r=He(N,e,r,r===null?e.first:r.next,b,k,p,n,_,i),v.set(k,r),h=[],d=[],l=r.next;continue}if(u&&na(m,b,p,_),(m.e.f&J)!==0&&(X(m.e),f&&((fe=m.a)==null||fe.unfix(),(y??(y=new Set)).delete(m))),m!==l){if(s!==void 0&&s.has(m)){if(h.length<d.length){var U=d[0],S;r=U.prev;var se=h[0],Q=h[h.length-1];for(S=0;S<h.length;S+=1)xe(h[S],U,a);for(S=0;S<d.length;S+=1)s.delete(d[S]);T(e,se.prev,Q.next),T(e,r,se),T(e,Q,U),l=U,r=Q,p-=1,h=[],d=[]}else s.delete(m),xe(m,l,a),T(e,m.prev,m.next),T(e,m,r===null?e.first:r.next),T(e,r,m),r=m;continue}for(h=[],d=[];l!==null&&l.k!==k;)(l.e.f&J)===0&&(s??(s=new Set)).add(l),d.push(l),l=l.next;if(l===null)continue;m=l}h.push(m),r=m,l=m.next}if(l!==null||s!==void 0){for(var D=s===void 0?[]:Me(s);l!==null;)(l.e.f&J)===0&&D.push(l),l=l.next;var Z=D.length;if(Z>0){var Re=(_&Pe)!==0&&c===0?a:null;if(f){for(p=0;p<Z;p+=1)(ue=D[p].a)==null||ue.measure();for(p=0;p<Z;p+=1)(ce=D[p].a)==null||ce.fix()}ra(e,D,Re,v)}}f&&Te(()=>{var ve;if(y!==void 0)for(m of y)(ve=m.a)==null||ve.apply()}),ge.first=e.first&&e.first.e,ge.last=r&&r.e}function na(t,e,a,n){(n&ne)!==0&&R(t.v,e),(n&te)!==0?R(t.i,a):t.i=a}function He(t,e,a,n,_,o,i,f,u,c){var v=(u&ne)!==0,g=(u&Qe)===0,l=v?g?ae(_):V(_):_,s=(u&te)===0?i:V(i),r={i:s,v:l,k:o,a:null,e:null,prev:a,next:n};try{return r.e=W(()=>f(t,l,s,c),w),r.e.prev=a&&a.e,r.e.next=n&&n.e,a===null?e.first=r:(a.next=r,a.e.next=r.e),n!==null&&(n.prev=r,n.e.prev=r.e),r}finally{}}function xe(t,e,a){for(var n=t.next?t.next.e.nodes_start:a,_=e?e.e.nodes_start:a,o=t.e.nodes_start;o!==n;){var i=Ze(o);_.before(o),o=i}}function T(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}var O;class la{constructor(){de(this,O,[{id:1,name:"Playlist 1",tracks:[{id:1,author:"Men At Work",duration:200.49,performer:"Men At Work",s3_artkey:"artkey1",s3_key:"key1",title:"Who Can It Be Now",url:"/mp3/who_can_it_be_now.mp3"},{id:2,author:"Mac Miller",duration:347.3,performer:"Mac Miller",s3_artkey:"artkey2",s3_key:"key2",title:"Self Care",url:"/mp3/mac_miller-self_care.mp3"},{id:3,author:"Stromae & Pomme",duration:168.96,performer:"Stromae & Pomme",s3_artkey:"artkey1231232",s3_key:"key321j12132k",title:"Ma Meilleure Ennemie",url:"/mp3/stromae_pomme_ma_meilleure_ennemie.mp3"}]},{id:2,name:"Playlist 2",tracks:[{id:1,author:"Men At Work",duration:200.49,performer:"Men At Work",s3_artkey:"artkey1",s3_key:"key1",title:"Who Can It Be Now",url:"/mp3/who_can_it_be_now.mp3"},{id:3,author:"Stromae & Pomme",duration:168.96,performer:"Stromae & Pomme",s3_artkey:"artkey1231232",s3_key:"key321j12132k",title:"Ma Meilleure Ennemie",url:"/mp3/stromae_pomme_ma_meilleure_ennemie.mp3"}]}])}async getAllPlaylists(){return new Promise(e=>{const a=F(this,O).map(({id:n,name:_})=>({id:n,name:_}));setTimeout(()=>e(a),500)})}async getTracksByPlaylistId(e){return new Promise(a=>{const n=F(this,O).find(_=>_.id===e);a(n?n.tracks:[])})}}O=new WeakMap;const Be=new la;var ia=(t,e,a)=>e.onSelectPlaylist(a()),sa=A('<div class="card bg-base-100 shadow-md"><div class="card-body"><h2 class="card-title"> </h2> <!> <div class="card-actions justify-end"><button class="btn btn-primary">Seleccionar</button></div></div></div>'),oa=A('<div class="inline-flex flex-col gap-4"><!></div>');function fa(t,e){le(e,!0);const a=(o,i=Ne)=>{var f=sa(),u=I(f),c=I(u),v=I(c,!0);E(c);var g=L(c,2);{var l=y=>{var h=me();z(()=>K(h,`${i().tracks.length??""} canciones`)),x(y,h)};H(g,y=>{i().tracks&&y(l)})}var s=L(g,2),r=I(s);r.__click=[ia,e,i],E(s),E(u),E(f),z(()=>K(v,i().name)),x(o,f)};var n=oa(),_=I(n);aa(_,()=>Be.getAllPlaylists(),o=>{var i=me("loading playlists...");x(o,i)},(o,i)=>{var f=Ee(),u=re(f);De(u,17,()=>P(i),Ce,(c,v)=>{a(c,()=>P(v))}),x(o,f)}),E(n),x(t,n),ie()}we(["click"]);var ua=A('<button class="btn btn-sm btn-primary">▶️</button>'),ca=A('<button class="btn btn-sm btn-secondary">⏸</button>'),va=A('<button class="btn btn-sm btn-primary">▶️</button>'),_a=A('<button disabled class="btn btn-sm btn-disabled">▶️</button>'),da=A('<li class="flex items-center justify-between rounded-lg bg-white p-2 shadow-sm hover:bg-gray-50"><span class="text-gray-700"> </span> <!></li>'),ma=A('<h2 class="mb-4 text-lg font-bold text-gray-800"> </h2> <ul class="space-y-2"></ul>',1),pa=A('<p class="text-gray-500">Selecciona una playlist para ver las canciones.</p>'),ya=A('<div class="min-h-7 rounded-lg bg-gray-100 p-4 shadow-md"><!></div>');function ha(t,e){le(e,!0);const a=(f,u=Ne)=>{var c=Ee(),v=re(c);{var g=s=>{var r=ua();r.__click=()=>{M.play_track(u()),M.current_playlist=e.selected_playlist},x(s,r)},l=(s,r)=>{{var y=d=>{var b=ca();b.__click=()=>M.pause(),x(d,b)},h=(d,b)=>{{var k=p=>{var N=va();N.__click=()=>M.play(),x(p,N)},m=p=>{var N=_a();x(p,N)};H(d,p=>{M.state.is_paused?p(k):p(m,!1)},b)}};H(s,d=>{M.state.is_playing?d(y):d(h,!1)},r)}};H(v,s=>{var r;((r=M.current_track)==null?void 0:r.id)!==u().id?s(g):s(l,!1)})}x(f,c)};var n=ya(),_=I(n);{var o=f=>{var u=ma(),c=re(u),v=I(c,!0);E(c);var g=L(c,2);De(g,21,()=>e.selected_playlist.tracks,Ce,(l,s)=>{var r=da(),y=I(r),h=I(y,!0);E(y);var d=L(y,2);a(d,()=>P(s)),E(r),z(()=>K(h,P(s).title)),x(l,r)}),E(g),z(()=>K(v,e.selected_playlist.name)),x(f,u)},i=f=>{var u=pa();x(f,u)};H(_,f=>{e.selected_playlist?f(o):f(i,!1)})}E(n),x(t,n),ie()}we(["click"]);var ba=A("<div><!> <!></div>");function Ia(t,e){le(e,!0);let a=ea(null);var n=ba(),_=I(n);fa(_,{onSelectPlaylist:async i=>{const f=await Be.getTracksByPlaylistId(i.id);$e(a,{...i,tracks:f},!0)}});var o=L(_,2);ha(o,{get selected_playlist(){return P(a)}}),E(n),x(t,n),ie()}export{Ia as component};
