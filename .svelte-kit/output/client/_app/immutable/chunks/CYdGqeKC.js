var m=e=>{throw TypeError(e)};var k=(e,r,t)=>r.has(e)||m("Cannot "+t);var i=(e,r,t)=>(k(e,r,"read from private field"),t?t.call(e):r.get(e)),f=(e,r,t)=>r.has(e)?m("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,t),n=(e,r,t,a)=>(k(e,r,"write to private field"),a?a.call(e,t):r.set(e,t),t);import{W as y,X as S,Z as M,M as I,h as v,ak as L,al as O,am as b,an as D,ao as R,a1 as p,q as P,ap as j,s as x,g as C,a as J}from"./AkqJN3-E.js";const U=!0;let T=!1;function N(){T||(T=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var r;if(!e.defaultPrevented)for(const t of e.target.elements)(r=t.__on_r)==null||r.call(t)})},{capture:!0}))}function V(e){var r=M,t=I;y(null),S(null);try{return e()}finally{y(r),S(t)}}function q(e,r,t,a=t){e.addEventListener(r,()=>V(t));const s=e.__on_r;s?e.__on_r=()=>{s(),a(!0)}:e.__on_r=()=>a(!0),N()}const B=Symbol("is custom element"),H=Symbol("is html");function z(e){if(v){var r=!1,t=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var a=e.value;A(e,"value",null),e.value=a}if(e.hasAttribute("checked")){var s=e.checked;A(e,"checked",null),e.checked=s}}};e.__on_r=t,L(t),N()}}function A(e,r,t,a){var s=W(e);v&&(s[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||s[r]!==(s[r]=t)&&(r==="loading"&&(e[O]=t),t==null?e.removeAttribute(r):typeof t!="string"&&G(e).includes(r)?e[r]=t:e.setAttribute(r,t))}function W(e){return e.__attributes??(e.__attributes={[B]:e.nodeName.includes("-"),[H]:e.namespaceURI===b})}var E=new Map;function G(e){var r=E.get(e.nodeName);if(r)return r;E.set(e.nodeName,r=[]);for(var t,a=e,s=Element.prototype;s!==a;){t=R(a);for(var o in t)t[o].set&&r.push(o);a=D(a)}return r}function F(e,r,t=r){var a=p();q(e,"input",s=>{var o=s?e.defaultValue:e.value;if(o=h(e)?d(o):o,t(o),a&&o!==(o=r())){var w=e.selectionStart,g=e.selectionEnd;e.value=o??"",g!==null&&(e.selectionStart=w,e.selectionEnd=Math.min(g,e.value.length))}}),(v&&e.defaultValue!==e.value||P(r)==null&&e.value)&&t(h(e)?d(e.value):e.value),j(()=>{var s=r();h(e)&&s===d(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function h(e){var r=e.type;return r==="number"||r==="range"}function d(e){return e===""?null:+e}const K=U;var c,l,u,_;class X{constructor(){f(this,c,null);f(this,l,null);f(this,u,null);f(this,_,x(!1));{const r=localStorage.getItem("authData");if(r)try{const{user:t,accessToken:a,refreshToken:s}=JSON.parse(r);n(this,c,t),n(this,l,a),n(this,u,s),this.isAuthenticated=!0}catch(t){console.error("Error al cargar los datos de autenticación desde localStorage:",t)}}}get isAuthenticated(){return C(i(this,_))}set isAuthenticated(r){J(i(this,_),r,!0)}async login(r,t){try{const a=await fetch("https://dummyjson.com/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:t,expiresInMins:30})});if(!a.ok)throw new Error("Error en la autenticación. Verifica tus credenciales.");const s=await a.json();n(this,l,s.accessToken),n(this,u,s.refreshToken),n(this,c,{id:s.id,username:s.username,email:s.email,firstName:s.firstName,lastName:s.lastName,gender:s.gender,image:s.image}),this.isAuthenticated=!0,K&&localStorage.setItem("authData",JSON.stringify({user:i(this,c),accessToken:i(this,l),refreshToken:i(this,u)}))}catch(a){throw console.error("Error en el inicio de sesión:",a),a}}logout(){n(this,c,null),n(this,l,null),n(this,u,null),this.isAuthenticated=!1,localStorage.removeItem("authData")}getUser(){return i(this,c)}getAccessToken(){return i(this,l)}getRefreshToken(){return i(this,u)}}c=new WeakMap,l=new WeakMap,u=new WeakMap,_=new WeakMap;const Q=new X;export{Q as a,F as b,z as r,A as s};
